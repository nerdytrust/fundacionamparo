<?php $__env->startSection("form"); ?>


    <?php foreach($columns as $column): ?>
        <?php if(!$column->is_primary): ?>
         <div class="form-group <?php if($errors->has($column->name)): ?> has-error <?php endif; ?>">

             <?php echo Form::label($column->input, $column->label); ?>

               
             <?php if($column->name == "password"): ?> 
                <?php echo Form::password($column->name,array('class' => 'form-control','placeholder'=>$column->label,'required'=>$column->required));; ?>

             <?php elseif($column->is_foreign_key): ?>
             <?php
                $fkmodel = new $column->model;
                $rmodel = $fkmodel::all();

                foreach ($rmodel as $rrecord) 
                    $column->data[$rrecord->{$fkmodel->getKeyName()}] = $rrecord->{$fkmodel->getName()};
                
            ?>
                <?php echo Form::select($column->name, [$column->data],$record->{$column->name});; ?>

             <?php elseif($column->input == "select"): ?>
                <?php echo Form::select($column->name, [$column->data],$record->{$column->name},array('class' => 'form-control','placeholder'=>$column->label,'required'=>$column->required));; ?>

             <?php elseif($column->input == "date" or $column->input == "datetime"): ?>

                <div class="input-group">
                  <input type="text" class="form-control datetime" value="<?php if(isset($record->{$column->name})): ?> <?php echo $record->{$column->name}; ?> <?php endif; ?>" placeholder="<?php echo $column->label; ?>" required="<?php echo $column->required; ?>" name="<?php echo $column->name; ?>"><span class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
                </div>
                
             <?php elseif($column->input != "number"  ): ?>
                <?php echo call_user_func("Form::".$column->input,$column->name,$record->{$column->name},array('class' => 'form-control','placeholder'=>$column->label,'required'=>$column->required)); ?>

             <?php else: ?>
                <?php echo call_user_func("Form::".$column->input,$column->name,"",$record->{$column->name},array('class' => 'form-control','required'=>$column->required)); ?>

             <?php endif; ?>

             <span class="help-block"><?php echo $errors->first($column->name); ?></span>
         </div>
        <?php endif; ?> 

    <?php endforeach; ?>
     

<?php $__env->stopSection(); ?>



<?php echo $__env->make("crud.layout-form", array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>