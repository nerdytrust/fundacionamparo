<?php foreach($columns as $column): ?>
    <?php if(!$column->is_primary): ?>
     <div class="form-group <?php if($errors->has($column->name)): ?> has-error <?php endif; ?>">

         <?php echo Form::label($column->input, $column->label); ?>


         <?php if($column->name == "password"): ?> 
            <?php echo Form::password($column->name,array('class' => 'form-control','placeholder'=>$column->label));; ?>

         <?php elseif($column->is_foreign_key): ?>
         <?php
            $fkmodel = new $column->model;
            $rmodel = $fkmodel::all();

            foreach ($rmodel as $rrecord) 
                $column->data[$rrecord->{$fkmodel->getKeyName()}] = $rrecord->{$fkmodel->getName()};
            
        ?>
            <?php echo Form::select($column->name, [$column->data],$record->{$column->name});; ?>

         <?php elseif($column->input == "select"): ?>
            <?php echo Form::select($column->name, [$column->data],$record->{$column->name},array('class' => 'form-control','placeholder'=>$column->label));; ?>

         <?php elseif($column->input == "date" or $column->input == "datetime" or $column->input == "time"  ): ?>

            <div class="input-group">
              <input type="text" class="form-control <?php echo $column->input; ?>" value="<?php if(isset($record->{$column->name})): ?> <?php echo $record->{$column->name}; ?> <?php endif; ?>" placeholder="<?php echo $column->label; ?>" name="<?php echo $column->name; ?>"><span class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
            </div>

        <?php elseif($column->input == "image" or  $column->input == "file"): ?>

            <div class="fileinput fileinput-new input-group" data-provides="fileinput">
              <div class="form-control" data-trigger="fileinput"><i class="glyphicon glyphicon-file fileinput-exists"></i> <span class="fileinput-filename"></span></div>
              <span class="input-group-addon btn btn-default btn-file"><span class="fileinput-new"><?php echo trans('crud.select_file'); ?></span><span class="fileinput-exists"><?php echo trans('crud.change'); ?></span>
                <input type="file" name="<?php echo $column->name; ?>">
              </span>
              <a href="#" class="input-group-addon btn btn-default fileinput-exists" data-dismiss="fileinput"><?php echo trans('crud.remove'); ?></a>
            </div>


            
         <?php elseif( $column->input == "money" or $column->input =="currency"): ?>
         
            <div class="input-group"> 
                <span class="input-group-addon">$</span>
                <input type="number" min="0" step="0.01" name="<?php echo $column->name; ?>" data-number-to-fixed="2" data-number-stepfactor="100" class="form-control currency"/>
            </div>

         <?php elseif($column->input == "number"): ?>
         
  
            <input type="number" min="0" step="1" name="<?php echo $column->name; ?>" data-number-to-fixed="2" data-number-stepfactor="100" class="form-control currency"  />
  

         <?php elseif($column->input != "number"): ?>
            <?php echo call_user_func("Form::".$column->input,$column->name,$record->{$column->name},array('class' => 'form-control','placeholder'=>$column->label)); ?>

         <?php else: ?>
            <?php echo call_user_func("Form::".$column->input,$column->name,"",$record->{$column->name},array('class' => 'form-control')); ?>

         <?php endif; ?>



         <span class="help-block"><?php echo $errors->first($column->name); ?></span>
     </div>
    <?php endif; ?> 

<?php endforeach; ?>
 


